# 主从切换

从之前的介绍我们知道`gdb`支持基于应用层的主从配置以及读写分离，并且所有的特性仅需要通过简单的配置即可实现，`gdb`内部将会对SQL请求自动地进行主从切换。在大部分的场景中，我们的写入请求是到`Master`主节点，而读取请求是到`Slave`从节点，这样的好处是能够对数据库的请求进行压力分摊，并提高数据库的可用性。但在某些场景中，我们期望读取操作在`Master`节点上执行，特别是一些对于即时性要求比较高的场景（因为主从节点之间的数据同步是有延迟的）。

开发者可以通过`Master`和`Slave`方法自定义决定当前链式操作在哪个节点上。

我们来一个简单的示例。我们有一个订单系统，每天的流量比较大，因此数据库在主从同步时往往会存在`1-500ms`时间的延迟。我们需要在订单创建后立刻展示订单列表（而不是支付）。

在订单创建的时候，没有必要指定操作的节点，因为写入操作默认是在主节点上执行的。为简化示例，我们这里仅展示关键的代码：
```go
Table("order").Data(g.Map{
    "uid"   : 1000,
    "price" : 99.99,
    // ...
}).Insert()
```

在订单列表页面查询时，我们需要使用`Master`方法指定查询操作是在主节点上进行，以避免读取延迟。
```go
Table("order").Master().Where("uid", 1000).All()
```

















